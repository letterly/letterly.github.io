<html>
    <head>
        <title>Ponca Dictionary</title>
        <style>
            body{
                background-color: bisque;
            }
            #buttonarray button{
                width: 5vw;
                height: 5vw;
                max-width: 45px;
                max-height: 45px;
                border: none;
                background-color: navy;
                color: white;
                font-weight: 700;
                font-size: min(4vw, 32px);
                border-radius: 1vw;
            }
            #options button{
                height: 5vw;
                max-height: 45px;
                border: none;
                background-color: gray;
                color: black;
                font-weight: 700;
                font-size: min(4vw, 32px);
                border-radius: 1vw;
            }
            input{
                outline: none;
                margin-bottom: 12px;
                margin-top: 12px;
                border: 3px black solid;
                width: 60%;
                margin-left: 20%;
                margin-right: 20%;
                height: 46px;
                font-size: 5vh;
                background-color: bisque;
                border-radius: 10px;
            }
            input::placeholder{
                font-family: Verdana;
                color: navy
            }
            #field{
                font-size: 24px;
                margin: 20px;
            }
            h1{
                font-family: Verdana;
                text-align: center;
                font-size: 48px;
                margin: 0px;
            }
            h3{
                font-family: Verdana;
                text-align: center;
                font-size: 24px;
                margin: 2px;
            }
            #buttonarray{
                margin-left: calc((100% - 31vw) / 2);
                margin-right: calc((100% - 31vw) / 2);
            }
            #options{
                text-align: center;
                font-family: Verdana;
                border: 3px solid black;
                padding: 5px;
                width: 60%;
                margin-left: 19.5%;
                margin-top: 2%;
                margin-bottom: 2%;
                border-radius: 10px;
            }
            #selectalph{
                font-size: 18px;
                margin: 2px;
            }
            .small{
                font-size: 80%;
                font-family: Courier;
            }
        </style>
    </head>
    <body>
        <h1>Ponca Dictionary</h1>
        <h3>Ponca Tribe of Nebraska</h3>
        <div id="options">
            <p id="selectalph">Select a second alphabet (optional)</p>
            <button id="IPA" onclick="altScript(this.textContent)">IPA</button>
            <button id="Omaha" onclick="altScript(this.textContent)">Omaha</button>
            <button id="Osage" onclick="altScript(this.textContent)">Osage</button>
        </div>
        <input id='input' onkeyup="openDictionary()" placeholder="Search a word in Ponca or English here..." />
        <div id="buttonarray">
            <button onclick="addText(this.textContent)">cÌŒ</button>
            <button onclick="addText(this.textContent)">Ä‘</button>
            <button onclick="addText(this.textContent)">É™</button>
            <button onclick="addText(this.textContent)">Êƒ</button>
            <button onclick="addText(this.textContent)">sÌŒ</button>
            <button onclick="addText(this.textContent)">zÌŒ</button>
            <button onclick="addText(this.textContent)">Ì</button>
            <button onclick="addText(this.textContent)">Ì€</button>
            <button onclick="addText(this.textContent)">Ì¨</button>
        </div>
        <div id="field"></div>
    </body>
    <script>

    alphabet = "none"

    function altScript(alp){
        if(alphabet != "none"){
            document.getElementById(alphabet).style.backgroundColor = "gray"
        }
        alphabet = alp

        console.log(alphabet)
        document.getElementById(alphabet).style.backgroundColor = "green"
    }
dictionary = 
`Ä‘isÌŒkeÌ|adj.|untied, unhooked, undone
uÄ‘iÌaiÌ€|v.|scatter, made into small pieces and scattered
baxÃº|v.|write, to write, as in writing a letter
eÌ¨ÌgaÌ¨Ä‘aÌ¨zÌŒaÌ¨Ì€|prep.|except, but, as in "that's the way it was <i>but</i>..."
esÌŒaÌ¨Ì'|adj/adv.|near, close at hand, very close, adjacent
maÌ¨ÌsÌŒaÌ¨'haÌ¨gaÌ€|n.|center tail feather of the eagle
wanaÌ'|v.|beg, beg for, ask for something to begin
zÌŒuÌheÌ€|v.|wade, to wade, to walk in water
iÌ'xa|v.|to laugh
iÌ'xa'xaÌ€|v.|to laugh at, laugh to scorn, sneer at, make fun of, mock, jeer
k'iÌ'u|v.|wounded (in war)
implode|muÌt'usÌŒiÌ€|v.|an explosion from forces within
hurt|naÌ¨Ìka|n./v.|injured
icebound|udaÌ'|adj.|something that is frozen within or covered with ice
event|sÌŒkaÌ'de|n.|a happening (this may include dances, ballgames, etc.)
deaf|wanaÌ¨Ì'aÌ¨ÌzÌŒi|n.|lit., cannot hear
debt|wagaÌxe|n.|something (money) that is owed to somebody, bound by verbal or written agreement
pond|neÌ'|n.|pool`.split("\n")


function openDictionary(){
    //take out the accent problem
    input.value = input.value.replace(/ÌÌ¨/g, "Ì¨Ì").replace(/Ì€Ì¨/g, "Ì¨Ì€")
    //
    z = input.value
    z = z.toLowerCase()
    field.innerHTML = ""
    if(z != ""){
        selected = dictionary.filter(y => y.startsWith(z)).slice(0,5)
        console.log(selected)
        for(s of selected){
            s = s.split("|")
            if(s.length == 3){
                field.innerHTML += `<p><b>${altOrth(s[0])}</b> <i>${verbify(s[1])}</i> ${deAbbrev(s[2])}</p>`
            }
            else{
                field.innerHTML += `<p><u>${s[0]}</u>: <b>${altOrth(s[1])}</b> <i>${verbify(s[2])}</i> ${deAbbrev(s[3])}</p>`
            }
        }
    }
}

function verbify(v){
    g = {
        "n./v.": "noun/verb",
        "adj/adv.": "adjective/adverb",
        "adv.": "adverb",
        "v.": "verb",
        "adj.": "adjective",
        "adj/v.": "adjective/verb",
        "prep.": "preposition",
    }[v]
    return g == undefined ? v : g
}

function deAbbrev(t){
    t = t.replace(/lit\./g, "<span style='text-decoration:dotted underline'>literally</span>")
    return t
}

function addText(x){
    input.value += x
    openDictionary()
}


function altOrth(txt){
    chains = {
        "IPA": {
            "\\'": "Ê”",
            "Ì¨Ì": "ÌÌ¨",
            "Ì¨Ì€": "Ì€Ì¨",
            "aÌ€": "ËŒa",
            "eÌ€": "ËŒe",
            "iÌ€": "ËŒi",
            "oÌ€": "ËŒo",
            "uÌ€": "ËŒu",
            "É™Ì€": "ËŒÉ™",
            "ÊƒÌ€": "ËŒÊƒ",
            "aÌ": "Ëˆa",
            "eÌ": "Ëˆe",
            "iÌ": "Ëˆi",
            "oÌ": "Ëˆo",
            "uÌ": "Ëˆu",
            "É™Ì": "ËˆÉ™",
            "ÊƒÌ": "ËˆÊƒ",
            "Ì¨": "Ìƒ",
            "Êƒ": "Éª",
            "a": "É‘",
            "Ä": "tÍ¡Êƒ",
            "cÌŒ": "tÍ¡Êƒ",
            "Å¡": "Êƒ",
            "sÌŒ": "Êƒ",
            "Å¾": "Ê’",
            "zÌŒ": "Ê’",
            "Ä‘": "Ã°",
            "c": "tÍ¡s",
            "j": "dÍ¡Ê’",
            "y": "j",
        },
        "Omaha": {
            "Ì¨Ì": "ÌÌ¨",
            "Ì¨Ì€": "Ì€Ì¨",
            "Ä": "ch",
            "sÌŒ": "sh",
            "zÌŒ": "zh",
            "Ä‘": "th",
            "Ì¨": "â¿",
        },
        "Osage": {
            "Ì€": "",
            "sÌŒ": "Å¡",
            "cÌŒ": "Ä",
            "zÌŒ": "Å¾",
            "Ì¨": "Í˜",
            "a": "ğ’°",
            "Ä": "ğ’µ",
            "e": "ğ’·",
            "h": "ğ’¹",
            "i": "ğ’»",
            "k": "ğ’¼",
            "g": "ğ’½",
            "l": "ğ’¿",
            "m": "ğ“€",
            "n": "ğ“",
            "o": "ğ“‚",
            "p": "ğ“„",
            "b": "ğ“…",
            "w": "ğ“†",
            "Å¡": "ğ“‡",
            "j": "ğ“‰ğ““",
            "t": "ğ“ˆ",
            "d": "ğ“‰",
            "c": "ğ“Š",
            "Ä‘": "ğ“",
            "u": "ğ“",
            "w": "ğ“",
            "x": "ğ“",
            "z": "ğ“’",
            "Å¾": "ğ““",
            "É™": "ğ’³",
        },
    }
    newtxt = txt

    if(alphabet == "none") return txt
    else{
        for(e of Object.keys(chains[alphabet])){
            newtxt = newtxt.replace(new RegExp(e, 'g'), chains[alphabet][e])
        }
        return txt + " (<span class='small'>" + newtxt + "</span>)"
     }
}
    </script>
</html>